昨日の日記に、テストケースが100を超えたと書いたけど、やっぱりちょっと減らした。  
同じようなことをしているテストはまとめて一つと数えるべきだ。  

ということで文字リテラルのパーサが完成した。  
あと作りたいのは浮動小数点のリテラル。  
これはたぶん文字列リテラルよりも簡単だから、少し気が楽。

なんだか心臓の動きが物凄く速いし耳鳴りもひどいしたまに気を失いそうになる。  
大丈夫かなこれ・・・。

リファクタリングが一区切りした。  
テストを書いていると、名前の変更やファイルの移動がやりやすい。  

次はプリミティブ型の評価器を作る。  
順番としては、`Char` -> `String` -> `Integer` -> `Double` といった感じでいく。  
後半に行くほど難しくなる。  
といっても、実は `Integer` では進数変換を行う必要があるので `Double` より難しいかも。  

まだ気を失いそうになる。

とりあえず、文字リテラルの最初の `u8` などは一旦無視して実装した。  
次は文字列の評価器を作る。  

作った。次は問題の `Integer` 型だ。  
ここから難易度が上がる。

`Integer` が終わった。`"a7fe09a"` のような16進数文字列を10進数に変換するときは、  
畳み込み関数を使うと便利。

`Double` が終わった。Haskell の `read` を使うことですぐに実装を終えた。  
ということで、プリミティブの評価は行えるようになった。  

次はようやく `if` や `for` を実装していく。  

その前に、statement のパーサが必要っぽい。  
とりあえず、式ステートメントと簡単な宣言ステートメントだけまずは実装する。  
あ、あとブロックも追加する。

式ステートメントとブロックは追加した。  
宣言が一番大変そうなので、ちょっと休んでから実装し始める。  

簡単な宣言のパーサを実装した。

式の中に括弧を含めてもいいようにしよう。  

`if` と `for` と `while` と `switch` の実装を終えた。  
あとは関数定義と関数呼び出しを実装すればそれなりに遊べるものになる。  
できればブラウザで動かしたい。  
大きな2つのテキストボックスを左右に配置して、  
左側にC++コードを入力すれば右側にパース結果がリアルタイムで表示される。  
そんな感じの機能を実装したい。  
そのためには Haskell でのサーバ構築方法を知っている必要があるけど、  
今回はローカルで動かすだけで満足しよう。  
できがよかったらどこかのサーバを借りて後悔する感じでいく。
