最近耳鳴りがひどかったり気を失いそうになっていたけど、  
毎日お腹いっぱい食べることを意識することでそれらの症状が軽減された気がする。  
やはり毎日しっかり食べることが大切。  

Dockerで試したいことを考えていく。  
まず、Dockerを使うことで環境を気にせずに何かのプログラムを動かすことができる。  
たとえばプログラミング言語であったり。  
そして、複数のコンテナが連動するようなアプリケーションであっても動かせる。  
データベースとの連携だって可能。  
そういえば、一つ疑問に思っていることがあったんだった。  
Webサーバのコンテナからデータベースのコンテナにアクセスするときの連携の仕方がよくわからない。  
ということで今日は、Webサーバとデータベースの連携について学ぶ。  
複数のコンテナを稼働させるから `docker-compose.yaml` を使いたくなるけど、  
まずはDockerだけで連携させてみる。

最初はネット上に情報が溢れていると思われるApache/PHPとMySQLの連携から始める。  
そういえば、ポートの公開とかは `docker run` 時以外はできないのかな。  

`docker run -d -p 80:80 --name my-apache-php-app -v "$PWD":/var/www/html php:7.2-apache`  
このコマンドを実行すると、PHPが動かせるApacheのコンテナが動き始める。  
このあとMySQLと連携していきたいのだけど、どうしよう。  
とりあえずMySQLのコンテナを入れてみる。  
以下のコマンドで入れられるらしい。  
`docker run --name some-mysql -e MYSQL_ROOT_PASSWORD=password -d mysql:tag`  
`tag` の部分はバージョンとか `latest` とかを入れる。  
というか、MySQLにバージョン8があるの知らなかった。  

おそらくApacheコンテナとMySQLコンテナは同じネットワークに属するから、  
連携が可能なように思える。  
「同じネットワークに属するか」を最初に確かめる。  
「コンテナ ネットワーク 確認」で検索することで目的の情報を取り出せるかな。  

どうやら `docker network inspect bridge` により、bridgeという名前のネットワークに  
属するコンテナの一覧が見れるようだ。  
結果として次が出力された。

```
...
"Containers": {
  "498de060fbd67e59cd306a23d1247eaaa6989e03070292bcb017630610375f1e": {
    "Name": "my-apache-php-app",
    "EndpointID": "84917c24b84aa6922cabbf3e8e31ad2483b0675af8ed701126a7a044008733e8",
    "MacAddress": "02:42:ac:11:00:02",
    "IPv4Address": "172.17.0.2/16",
    "IPv6Address": ""
  },
  "a81358c65cb03e45271765cf0eaf825030091086c9a1875590e881aa5552914d": {
    "Name": "some-mysql",
    "EndpointID": "b6bc66673cb7d5c3a1c3a2d94ad16dcfba8559c78734ebc0954f584343cea84a",
    "MacAddress": "02:42:ac:11:00:03",
    "IPv4Address": "172.17.0.3/16",
    "IPv6Address": ""
  },
},
...
```

`498de...` というのがApacheコンテナで、`a8135...` というのがMySQLコンテナである。  
デフォルトで同じネットワークに属することがわかる。  
ここからどうやって連携させていこう。  

自分で考えるのが面倒なため、ネット上にあるチュートリアルをする。  

* `docker-compose.yml` の `version: "3"` とは何か → 単なるファイルのバージョン。[現在の最新バージョン](https://docs.docker.com/compose/compose-file/)は `3.7` なのでこれを利用したいけど、チュートリアルは `3` となっているのでそれに倣う
* `volumes` に `./php.ini:/usr/local/etc/php/php.ini` と書いているけど、もし手元に `php.ini` がなかった場合は生成される？そしてそれはコンテナを削除しても残っている？ → おそらくそう。そして `php.ini` は `docker-compose.yml` と同じ場所にある → チュートリアルを進めていたところ、おそらく違うっぽい。手元で `php.ini` を作る必要がある。

WindowsでDockerを動かしたくてWindows 10 Proを購入しようとしたけど、  
デビッドカードの入力で詰まってしまった。  
正しい情報を入力しているはずなのに、なぜか承認されない。  
そこで過去に使っていたデビッドカードの情報を入力したところ、そちらはきちんと承認された。  
面倒だけど、今の口座から過去の口座に送金して入金しようかな。  
そのためには外に出る必要がある。嫌だなぁ…。

これから本名で生きていくかどうか本当に悩んでいる。  
これらすべての文章は匿名で書いているようなもので、後には何も残らないかもしれない。  
それよりも、これから社会に出ていく中で、本名で活動記録を残しておいた方がいいのではないか。  
しかしやっぱり本名は怖い。  
